# Environment Variables Reference

**Complete guide to all environment variables for Delivery Dispatch System**

This document lists ALL environment variables used by your application with explanations, examples, and production-ready values.

---

## Quick Production Template

Copy this into Forge environment editor and fill in the values:

```env
# ===================================
# APPLICATION
# ===================================
APP_NAME="Delivery Dispatch System"
APP_ENV=production
APP_KEY=base64:... # Forge generates this
APP_DEBUG=false
APP_TIMEZONE=UTC
APP_URL=https://yourdomain.com

# ===================================
# BUSINESS CONFIGURATION
# ===================================
PICKUP_LOCATION_LAT=40.7489
PICKUP_LOCATION_LNG=-73.9680

# ===================================
# LOCALIZATION
# ===================================
APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

# ===================================
# MAINTENANCE
# ===================================
APP_MAINTENANCE_DRIVER=file

# ===================================
# SECURITY
# ===================================
BCRYPT_ROUNDS=12

# ===================================
# LOGGING
# ===================================
LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# ===================================
# DATABASE
# ===================================
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=delivery_dispatch
DB_USERNAME=forge
DB_PASSWORD=<forge-generated-password>

# ===================================
# SESSIONS
# ===================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# ===================================
# BROADCASTING
# ===================================
BROADCAST_CONNECTION=reverb

# ===================================
# CACHE
# ===================================
CACHE_STORE=redis
CACHE_PREFIX=delivery-dispatch-

# ===================================
# QUEUE
# ===================================
QUEUE_CONNECTION=redis

# ===================================
# REDIS
# ===================================
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1

# ===================================
# MAIL
# ===================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=your-username
MAIL_PASSWORD=your-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"

# ===================================
# FILESYSTEM
# ===================================
FILESYSTEM_DISK=local

# ===================================
# AWS (If using S3 for storage/backups)
# ===================================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ===================================
# REVERB WEBSOCKET
# ===================================
REVERB_APP_ID=335156
REVERB_APP_KEY=nszkx9iwsyon72hwgdkg
REVERB_APP_SECRET=blumdhqfqvk7ys8vhbvv
REVERB_HOST=yourdomain.com
REVERB_PORT=443
REVERB_SCHEME=https
REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8080
REVERB_APP_MAX_CONNECTIONS=200
REVERB_SCALING_ENABLED=true

# ===================================
# VITE (Frontend Build)
# ===================================
VITE_APP_NAME="${APP_NAME}"
VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"
VITE_REVERB_HOST="${REVERB_HOST}"
VITE_REVERB_PORT="${REVERB_PORT}"
VITE_REVERB_SCHEME="${REVERB_SCHEME}"

# ===================================
# PUSHER (Alternative to Reverb)
# ===================================
# Only needed if switching from Reverb to Pusher
# PUSHER_APP_ID=
# PUSHER_APP_KEY=
# PUSHER_APP_SECRET=
# PUSHER_HOST=
# PUSHER_PORT=443
# PUSHER_SCHEME=https
# PUSHER_APP_CLUSTER=mt1

# ===================================
# POS INTEGRATION
# ===================================
POS_WEBHOOK_API_KEY=your-secure-api-key-here
```

---

## Detailed Variable Explanations

### Application Settings

#### `APP_NAME`
- **Purpose:** Application name displayed in UI and emails
- **Development:** `Laravel`
- **Production:** `"Delivery Dispatch System"` (use quotes if spaces)
- **Required:** Yes
- **Example:** `APP_NAME="My Delivery Service"`

#### `APP_ENV`
- **Purpose:** Defines the environment (local, staging, production)
- **Development:** `local`
- **Production:** `production`
- **Required:** Yes
- **Impact:** Changes error handling, caching behavior, logging
- **Valid values:** `local`, `production`, `staging`, `testing`

#### `APP_KEY`
- **Purpose:** Encryption key for sessions, cookies, passwords
- **Development:** Generated via `php artisan key:generate`
- **Production:** Auto-generated by Forge or manually generate
- **Required:** **CRITICAL** - App won't work without this
- **Format:** `base64:...` (44 characters after colon)
- **Security:** ‚ö†Ô∏è NEVER share or commit this key
- **Regeneration:** Will invalidate all sessions/cookies

#### `APP_DEBUG`
- **Purpose:** Show detailed errors vs friendly error pages
- **Development:** `true`
- **Production:** `false` **MUST BE FALSE**
- **Required:** Yes
- **Impact:**
  - `true`: Shows stack traces, queries, environment variables (SECURITY RISK!)
  - `false`: Shows generic error pages
- **Security:** ‚ö†Ô∏è Setting to `true` in production exposes sensitive data

#### `APP_TIMEZONE`
- **Purpose:** Default timezone for timestamps and scheduling
- **Development:** `UTC`
- **Production:** `UTC` (recommended) or your local timezone
- **Required:** No (defaults to UTC)
- **Examples:** `America/New_York`, `Europe/London`, `Asia/Dubai`
- **Impact:** Affects scheduled tasks, timestamps, date formatting

#### `APP_URL`
- **Purpose:** Base URL for generating links, emails, assets
- **Development:** `http://localhost`
- **Production:** `https://yourdomain.com`
- **Required:** Yes
- **Format:** Include protocol (http/https), no trailing slash
- **Impact:** Used in email links, password resets, asset URLs

---

### Business Configuration

#### `PICKUP_LOCATION_LAT`
- **Purpose:** Latitude of your warehouse/restaurant pickup location
- **Development:** `40.7489` (New York example)
- **Production:** Your actual location latitude
- **Required:** **Yes** (critical for your app logic)
- **Format:** Decimal degrees (e.g., `40.7489`)
- **How to get:** Use Google Maps, right-click location ‚Üí copy coordinates

#### `PICKUP_LOCATION_LNG`
- **Purpose:** Longitude of your warehouse/restaurant pickup location
- **Development:** `-73.9680` (New York example)
- **Production:** Your actual location longitude
- **Required:** **Yes** (critical for your app logic)
- **Format:** Decimal degrees (e.g., `-73.9680`)

---

### Database Configuration

#### `DB_CONNECTION`
- **Purpose:** Database driver to use
- **Development:** `mysql` or `sqlite`
- **Production:** `mysql`
- **Required:** Yes
- **Valid values:** `mysql`, `pgsql`, `sqlite`, `sqlsrv`

#### `DB_HOST`
- **Purpose:** Database server address
- **Development:** `127.0.0.1`
- **Production:** `127.0.0.1` (same server) or remote IP
- **Required:** Yes
- **Note:** Forge installs MySQL on same server

#### `DB_PORT`
- **Purpose:** Database server port
- **Development:** `3306`
- **Production:** `3306` (default MySQL port)
- **Required:** Yes

#### `DB_DATABASE`
- **Purpose:** Database name
- **Development:** `delivery_dispatch`
- **Production:** `delivery_dispatch` (or your chosen name)
- **Required:** Yes
- **Note:** Must be created in Forge first

#### `DB_USERNAME`
- **Purpose:** Database user
- **Development:** `root`
- **Production:** `forge` (Forge default)
- **Required:** Yes

#### `DB_PASSWORD`
- **Purpose:** Database password
- **Development:** Your local password
- **Production:** Forge-generated secure password
- **Required:** Yes
- **Security:** ‚ö†Ô∏è Use strong password (Forge auto-generates)
- **Location:** Forge shows this when creating database

---

### Cache Configuration

#### `CACHE_STORE`
- **Purpose:** Cache driver for application caching
- **Development:** `file` or `database`
- **Production:** `redis` **HIGHLY RECOMMENDED**
- **Required:** No (defaults to file)
- **Valid values:** `file`, `redis`, `memcached`, `database`, `array`
- **Performance Impact:**
  - `file`: Slow, not recommended for production
  - `redis`: Fast, scales well, recommended for production
  - `database`: Medium, acceptable for small apps

#### `CACHE_PREFIX`
- **Purpose:** Prefix for cache keys (useful when sharing Redis)
- **Development:** Empty or any prefix
- **Production:** `delivery-dispatch-`
- **Required:** No
- **When needed:** If multiple apps share same Redis server

---

### Session Configuration

#### `SESSION_DRIVER`
- **Purpose:** Storage driver for user sessions
- **Development:** `database` or `file`
- **Production:** `redis` **HIGHLY RECOMMENDED**
- **Required:** No (defaults to file)
- **Valid values:** `file`, `database`, `redis`, `cookie`, `memcached`
- **Performance Impact:**
  - `database`: Acceptable for low traffic
  - `redis`: Fast, recommended for production with multiple riders

#### `SESSION_LIFETIME`
- **Purpose:** Session expiration time in minutes
- **Development:** `120` (2 hours)
- **Production:** `120` or longer based on needs
- **Required:** No
- **Impact:** Users logged out after this many minutes of inactivity

#### `SESSION_ENCRYPT`
- **Purpose:** Whether to encrypt session data
- **Development:** `false`
- **Production:** `false` (Redis is local, no need)
- **Required:** No
- **When to use:** Only if session data contains very sensitive info

---

### Queue Configuration

#### `QUEUE_CONNECTION`
- **Purpose:** Queue driver for background jobs
- **Development:** `database` or `sync`
- **Production:** `redis` **HIGHLY RECOMMENDED**
- **Required:** No (defaults to sync)
- **Valid values:** `sync`, `database`, `redis`, `beanstalkd`, `sqs`
- **Performance Impact:**
  - `sync`: Runs immediately, blocks response (not recommended)
  - `database`: Acceptable, but slower than Redis
  - `redis`: Fast, recommended for production

---

### Redis Configuration

#### `REDIS_CLIENT`
- **Purpose:** PHP extension for Redis
- **Development:** `phpredis` or `predis`
- **Production:** `phpredis` (faster, native C extension)
- **Required:** If using Redis
- **Valid values:** `phpredis`, `predis`

#### `REDIS_HOST`
- **Purpose:** Redis server address
- **Development:** `127.0.0.1`
- **Production:** `127.0.0.1` (Forge installs on same server)
- **Required:** If using Redis

#### `REDIS_PASSWORD`
- **Purpose:** Redis authentication password
- **Development:** `null`
- **Production:** `null` (local Redis doesn't need password)
- **Required:** No
- **When to use:** If Redis is on remote server or security required

#### `REDIS_PORT`
- **Purpose:** Redis server port
- **Development:** `6379`
- **Production:** `6379` (default)
- **Required:** If using Redis

#### `REDIS_DB`
- **Purpose:** Redis database number for default connection
- **Development:** `0`
- **Production:** `0`
- **Required:** No
- **Note:** Redis has 16 databases (0-15)

#### `REDIS_CACHE_DB`
- **Purpose:** Separate Redis database for cache
- **Development:** `1`
- **Production:** `1`
- **Required:** No
- **Purpose:** Keeps cache separate from sessions/queues

---

### Broadcasting Configuration

#### `BROADCAST_CONNECTION`
- **Purpose:** Broadcasting driver for real-time updates
- **Development:** `reverb`
- **Production:** `reverb` or `pusher`
- **Required:** Yes (for your WebSocket functionality)
- **Valid values:** `reverb`, `pusher`, `ably`, `redis`, `log`, `null`
- **Your app uses:** `reverb` (self-hosted WebSocket)

---

### Reverb WebSocket Configuration

**What is Reverb?**
- Laravel's self-hosted WebSocket server
- Powers real-time GPS updates, order notifications
- No external service needed (unlike Pusher)

#### `REVERB_APP_ID`
- **Purpose:** Application identifier for Reverb
- **Development:** Any random number (e.g., `335156`)
- **Production:** Generate new random number
- **Required:** Yes
- **Format:** Numeric string
- **Security:** Should be unique per environment

#### `REVERB_APP_KEY`
- **Purpose:** Public key for Reverb authentication
- **Development:** Random string (e.g., `nszkx9iwsyon72hwgdkg`)
- **Production:** **GENERATE NEW KEY**
- **Required:** Yes
- **Format:** Alphanumeric string (20-30 chars)
- **Generate:** `php -r "echo bin2hex(random_bytes(10));"`

#### `REVERB_APP_SECRET`
- **Purpose:** Private key for Reverb server authentication
- **Development:** Random string (e.g., `blumdhqfqvk7ys8vhbvv`)
- **Production:** **GENERATE NEW SECRET**
- **Required:** Yes
- **Format:** Alphanumeric string (20-30 chars)
- **Security:** ‚ö†Ô∏è Keep secret, don't expose to frontend
- **Generate:** `php -r "echo bin2hex(random_bytes(10));"`

#### `REVERB_HOST`
- **Purpose:** WebSocket server hostname
- **Development:** `localhost`
- **Production:** `yourdomain.com` (your domain name)
- **Required:** Yes
- **Format:** Domain name without protocol
- **Impact:** Frontend connects to this host

#### `REVERB_PORT`
- **Purpose:** WebSocket server port (external)
- **Development:** `8080`
- **Production:** `443` (HTTPS) or `80` (HTTP)
- **Required:** Yes
- **Note:** With Nginx proxy, use 443 for SSL

#### `REVERB_SCHEME`
- **Purpose:** WebSocket connection protocol
- **Development:** `http`
- **Production:** `https` (if SSL enabled)
- **Required:** Yes
- **Valid values:** `http`, `https`
- **Impact:** Determines ws:// vs wss:// connection

#### `REVERB_SERVER_HOST`
- **Purpose:** Internal host Reverb listens on
- **Development:** `0.0.0.0`
- **Production:** `0.0.0.0` (all interfaces)
- **Required:** Yes
- **Don't change:** Always `0.0.0.0`

#### `REVERB_SERVER_PORT`
- **Purpose:** Internal port Reverb listens on
- **Development:** `8080`
- **Production:** `8080` (Nginx proxies to this)
- **Required:** Yes
- **Don't change:** Keep as `8080`, Nginx proxies from 443 to 8080

#### `REVERB_APP_MAX_CONNECTIONS`
- **Purpose:** Maximum concurrent WebSocket connections
- **Development:** `200`
- **Production:** `200` (sufficient for 50 riders + supervisors)
- **Required:** No
- **Calculation:** ~50 riders + 2 supervisors + admin dashboards = ~55 connections
- **Buffer:** 200 provides plenty of headroom

#### `REVERB_SCALING_ENABLED`
- **Purpose:** Enable Redis-based scaling for multiple Reverb instances
- **Development:** `false`
- **Production:** `true` (enables horizontal scaling later)
- **Required:** No
- **When needed:** If running multiple app servers

---

### Vite Configuration (Frontend)

These variables are used during frontend build and exposed to JavaScript:

#### `VITE_APP_NAME`
- **Purpose:** App name available in frontend
- **Value:** `"${APP_NAME}"` (references APP_NAME)
- **Required:** No
- **Usage:** Can display in frontend UI

#### `VITE_REVERB_APP_KEY`
- **Purpose:** Reverb public key for frontend WebSocket connection
- **Value:** `"${REVERB_APP_KEY}"` (references REVERB_APP_KEY)
- **Required:** Yes (for WebSocket to work)
- **Security:** ‚úÖ Safe to expose (public key)

#### `VITE_REVERB_HOST`
- **Purpose:** Reverb hostname for frontend connection
- **Value:** `"${REVERB_HOST}"` (references REVERB_HOST)
- **Required:** Yes

#### `VITE_REVERB_PORT`
- **Purpose:** Reverb port for frontend connection
- **Value:** `"${REVERB_PORT}"` (references REVERB_PORT)
- **Required:** Yes

#### `VITE_REVERB_SCHEME`
- **Purpose:** Protocol (http/https) for frontend WebSocket
- **Value:** `"${REVERB_SCHEME}"` (references REVERB_SCHEME)
- **Required:** Yes

**Note:** After changing any `VITE_*` variables, you MUST rebuild frontend:
```bash
npm run build
```

---

### Logging Configuration

#### `LOG_CHANNEL`
- **Purpose:** Default logging channel
- **Development:** `stack`
- **Production:** `stack`
- **Required:** No
- **Valid values:** `stack`, `single`, `daily`, `slack`, `syslog`

#### `LOG_STACK`
- **Purpose:** Channels included in stack
- **Development:** `single`
- **Production:** `single` or `daily`
- **Required:** No
- **Options:**
  - `single`: One log file (laravel.log)
  - `daily`: New log file per day (laravel-YYYY-MM-DD.log)

#### `LOG_LEVEL`
- **Purpose:** Minimum log level to record
- **Development:** `debug`
- **Production:** `error` or `warning`
- **Required:** No
- **Valid values:** `debug`, `info`, `notice`, `warning`, `error`, `critical`, `alert`, `emergency`
- **Recommendation:** Use `error` in production to reduce log size

#### `LOG_DEPRECATIONS_CHANNEL`
- **Purpose:** Separate channel for deprecation warnings
- **Development:** `null`
- **Production:** `null` (unless debugging)
- **Required:** No

---

### Mail Configuration

#### `MAIL_MAILER`
- **Purpose:** Mail service driver
- **Development:** `log` (writes to log file instead of sending)
- **Production:** `smtp`, `mailgun`, `ses`, `postmark`, etc.
- **Required:** Yes
- **Options:**
  - `log`: For development/testing
  - `smtp`: Generic SMTP server (Gmail, etc.)
  - `mailgun`: Mailgun service
  - `ses`: Amazon SES
  - `postmark`: Postmark service

#### `MAIL_HOST`
- **Purpose:** SMTP server hostname
- **Production Example (Gmail):** `smtp.gmail.com`
- **Production Example (Mailgun):** `smtp.mailgun.org`
- **Required:** If using SMTP
- **Note:** Varies by provider

#### `MAIL_PORT`
- **Purpose:** SMTP server port
- **Common ports:**
  - `587`: TLS (recommended)
  - `465`: SSL
  - `25`: Unencrypted (not recommended)
- **Required:** If using SMTP

#### `MAIL_USERNAME`
- **Purpose:** SMTP authentication username
- **Production:** Your email or API username
- **Required:** If using SMTP

#### `MAIL_PASSWORD`
- **Purpose:** SMTP authentication password
- **Production:** Your password or API key
- **Required:** If using SMTP
- **Security:** ‚ö†Ô∏è For Gmail, use App Password, not regular password

#### `MAIL_ENCRYPTION`
- **Purpose:** Encryption method
- **Development:** `tls`
- **Production:** `tls` (recommended) or `ssl`
- **Required:** If using SMTP
- **Valid values:** `tls`, `ssl`, `null`

#### `MAIL_FROM_ADDRESS`
- **Purpose:** Default sender email address
- **Development:** `hello@example.com`
- **Production:** `noreply@yourdomain.com`
- **Required:** Yes
- **Note:** Should match your domain for better deliverability

#### `MAIL_FROM_NAME`
- **Purpose:** Default sender name
- **Value:** `"${APP_NAME}"` (references APP_NAME)
- **Required:** Yes

**Mail Service Recommendations:**

1. **Mailgun (Recommended)**
   - Free: 5,000 emails/month
   - Easy setup
   - Good deliverability

2. **Amazon SES**
   - Cheapest at scale ($0.10/1000 emails)
   - Requires AWS account
   - More complex setup

3. **Gmail SMTP (Quick start)**
   - Free
   - Limited (500 emails/day)
   - Requires App Password

---

### POS Integration

#### `POS_WEBHOOK_API_KEY`
- **Purpose:** Secure key for POS system webhook authentication
- **Development:** `your-secure-api-key-here`
- **Production:** **GENERATE NEW SECURE KEY**
- **Required:** Yes (for POS integration to work)
- **Format:** Long random string (64 characters recommended)
- **Security:** ‚ö†Ô∏è **CRITICAL** - Prevents unauthorized order creation
- **Generate:** `php -r "echo bin2hex(random_bytes(32));"`
- **Usage:** POS system includes this in webhook requests
- **Share with:** Only POS system administrator

---

### Filesystem Configuration

#### `FILESYSTEM_DISK`
- **Purpose:** Default storage disk
- **Development:** `local`
- **Production:** `local` or `s3`
- **Required:** No
- **Valid values:** `local`, `public`, `s3`
- **Note:** Your app doesn't heavily use file storage

---

### AWS Configuration (Optional)

Only needed if using S3 for file storage or SES for email:

#### `AWS_ACCESS_KEY_ID`
- **Purpose:** AWS access key
- **Required:** If using AWS services
- **Get from:** AWS Console ‚Üí IAM

#### `AWS_SECRET_ACCESS_KEY`
- **Purpose:** AWS secret key
- **Required:** If using AWS services
- **Security:** ‚ö†Ô∏è Keep secret

#### `AWS_DEFAULT_REGION`
- **Purpose:** AWS region for services
- **Default:** `us-east-1`
- **Valid values:** `us-east-1`, `us-west-2`, `eu-west-1`, etc.

#### `AWS_BUCKET`
- **Purpose:** S3 bucket name
- **Required:** If using S3

---

## Environment-Specific Templates

### Development (.env for local)

```env
APP_ENV=local
APP_DEBUG=true
APP_URL=http://localhost

DB_CONNECTION=mysql
CACHE_STORE=file
QUEUE_CONNECTION=sync
SESSION_DRIVER=database

MAIL_MAILER=log

REVERB_HOST=localhost
REVERB_PORT=8080
REVERB_SCHEME=http
```

### Staging (.env for staging server)

```env
APP_ENV=staging
APP_DEBUG=false
APP_URL=https://staging.yourdomain.com

DB_CONNECTION=mysql
CACHE_STORE=redis
QUEUE_CONNECTION=redis
SESSION_DRIVER=redis

MAIL_MAILER=log  # Or test mail service

REVERB_HOST=staging.yourdomain.com
REVERB_PORT=443
REVERB_SCHEME=https
```

### Production (.env for live server)

```env
APP_ENV=production
APP_DEBUG=false  # MUST BE FALSE!
APP_URL=https://yourdomain.com

DB_CONNECTION=mysql
CACHE_STORE=redis  # MUST USE REDIS
QUEUE_CONNECTION=redis  # MUST USE REDIS
SESSION_DRIVER=redis  # MUST USE REDIS

MAIL_MAILER=smtp  # Real mail service
LOG_LEVEL=error  # Reduce log size

REVERB_HOST=yourdomain.com
REVERB_PORT=443
REVERB_SCHEME=https
```

---

## Security Best Practices

### Never Commit These Values

‚ö†Ô∏è **NEVER commit to Git:**
- `APP_KEY`
- `DB_PASSWORD`
- `MAIL_PASSWORD`
- `AWS_SECRET_ACCESS_KEY`
- `POS_WEBHOOK_API_KEY`
- `REVERB_APP_SECRET`

‚úÖ **Always commit:**
- `.env.example` with placeholder values
- Structure and variable names (without actual values)

### Generate Strong Keys

Use these commands to generate secure random keys:

```bash
# Generate 32-byte key (64 hex characters)
php -r "echo bin2hex(random_bytes(32));"

# Generate 16-byte key (32 hex characters)
php -r "echo bin2hex(random_bytes(16));"

# Generate 10-byte key (20 hex characters) - for Reverb
php -r "echo bin2hex(random_bytes(10));"

# Generate Laravel APP_KEY
php artisan key:generate
```

### Regenerate for Production

**Always generate new keys for production:**

1. `APP_KEY` - Forge does this automatically
2. `POS_WEBHOOK_API_KEY` - Generate new
3. `REVERB_APP_KEY` - Generate new
4. `REVERB_APP_SECRET` - Generate new
5. `REVERB_APP_ID` - Use new random number

### Environment File Permissions

On server, protect `.env` file:

```bash
# Set permissions (owner read/write only)
chmod 600 .env

# Verify
ls -la .env
# Should show: -rw------- (only owner can read/write)
```

---

## Validation Commands

### Check Configuration

```bash
# View all config (sanitized)
php artisan config:show

# Check specific config
php artisan config:show database
php artisan config:show cache
php artisan config:show broadcasting

# View about page (shows environment)
php artisan about
```

### Test Connections

```bash
# Test database
php artisan tinker
>>> DB::connection()->getPdo();
>>> DB::table('users')->count();

# Test Redis
php artisan tinker
>>> Cache::store('redis')->put('test', 'value', 60);
>>> Cache::get('test');

# Test cache
php artisan cache:clear
php artisan cache:put test_key "test_value" 60
php artisan tinker
>>> Cache::get('test_key');

# Test queue
php artisan queue:work --once

# Test mail (view in logs if using 'log' mailer)
php artisan tinker
>>> Mail::raw('Test email', function($msg) { $msg->to('test@example.com')->subject('Test'); });
```

### Clear Cached Config

After changing `.env`, always clear cache:

```bash
# Clear all caches
php artisan optimize:clear

# Or individually
php artisan config:clear
php artisan cache:clear
php artisan route:clear
php artisan view:clear
```

---

## Troubleshooting

### "No application encryption key"

**Cause:** `APP_KEY` is missing or empty

**Solution:**
```bash
php artisan key:generate
```

### WebSocket Connection Refused

**Cause:** Reverb configuration issues

**Check:**
1. `REVERB_HOST` matches your domain
2. `REVERB_SCHEME` is `https` if using SSL
3. `REVERB_PORT` is correct (443 for HTTPS)
4. Reverb daemon is running
5. Nginx has WebSocket proxy configured

### Queue Jobs Not Processing

**Cause:** Queue configuration or worker issues

**Check:**
1. `QUEUE_CONNECTION=redis` in production
2. Queue workers are running (Forge ‚Üí Queue)
3. Redis is running: `redis-cli ping`

### Cache Not Working

**Cause:** Cache configuration issues

**Check:**
1. `CACHE_STORE=redis` in production
2. Redis is running
3. Clear cache: `php artisan cache:clear`
4. Check Redis: `redis-cli INFO keyspace`

### Mail Not Sending

**Cause:** Mail configuration incomplete

**Check:**
1. `MAIL_MAILER` is not 'log' in production
2. SMTP credentials are correct
3. Test: Send test email via tinker
4. Check logs: `storage/logs/laravel.log`

---

## Quick Reference Table

| Variable | Dev | Production | Required | Security |
|----------|-----|------------|----------|----------|
| `APP_ENV` | local | production | ‚úÖ | Low |
| `APP_DEBUG` | true | **false** | ‚úÖ | **üî¥ High** |
| `APP_KEY` | Generated | Generated | ‚úÖ | **üî¥ Critical** |
| `APP_URL` | localhost | yourdomain.com | ‚úÖ | Low |
| `DB_PASSWORD` | Any | Strong | ‚úÖ | **üî¥ High** |
| `CACHE_STORE` | file | **redis** | ‚ö†Ô∏è | Low |
| `QUEUE_CONNECTION` | sync | **redis** | ‚ö†Ô∏è | Low |
| `SESSION_DRIVER` | database | **redis** | ‚ö†Ô∏è | Low |
| `REVERB_APP_KEY` | Random | **New random** | ‚úÖ | Medium |
| `REVERB_APP_SECRET` | Random | **New random** | ‚úÖ | **üî¥ High** |
| `REVERB_HOST` | localhost | yourdomain.com | ‚úÖ | Low |
| `REVERB_SCHEME` | http | **https** | ‚úÖ | Medium |
| `POS_WEBHOOK_API_KEY` | Test | **New secure** | ‚úÖ | **üî¥ High** |
| `MAIL_MAILER` | log | smtp/mailgun | ‚úÖ | Low |
| `LOG_LEVEL` | debug | **error** | ‚ö†Ô∏è | Low |

**Legend:**
- ‚úÖ Required
- ‚ö†Ô∏è Recommended
- üî¥ High Security - Never expose or commit
- Medium - Regenerate for production
- Low - OK to use defaults

---

## Summary

### Critical for Production

1. **Must Change:**
   - `APP_ENV` ‚Üí `production`
   - `APP_DEBUG` ‚Üí `false`
   - `APP_URL` ‚Üí your domain
   - `CACHE_STORE` ‚Üí `redis`
   - `QUEUE_CONNECTION` ‚Üí `redis`
   - `SESSION_DRIVER` ‚Üí `redis`

2. **Must Generate New:**
   - `APP_KEY` (Forge does this)
   - `POS_WEBHOOK_API_KEY`
   - `REVERB_APP_KEY`
   - `REVERB_APP_SECRET`
   - `REVERB_APP_ID`

3. **Must Update:**
   - `REVERB_HOST` ‚Üí your domain
   - `REVERB_SCHEME` ‚Üí `https`
   - `REVERB_PORT` ‚Üí `443`
   - `DB_PASSWORD` ‚Üí Forge-generated

4. **Must Configure:**
   - Mail service (SMTP, Mailgun, etc.)
   - Backup strategy

### Total Variables to Set

**Minimum (for basic operation):** ~20 variables
**Recommended (for production):** ~35 variables
**Optional (for advanced features):** ~10 variables

### Deployment Readiness

Before deploying, ensure:
- [ ] All required variables documented
- [ ] Production values prepared
- [ ] Security keys generated
- [ ] Mail service configured
- [ ] `.env.example` updated in repo

---

**Need help with a specific variable? Refer to the detailed sections above.**
